<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrievanceForum</title>

    <script src="https://kit.fontawesome.com/08c3f952c9.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat&family=Quicksand:wght@600&display=swap');
        body{
            background-color:white;
            font-family: 'Montserrat', sans-serif;
            font-family: 'Quicksand', sans-serif;
        }
        @media (min-width:100px)  { }
        @media (min-width:600px)  { }
        @media (min-width:1281px) { }
    </style>
</head>
<body>
<div class="container-fluid">
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">GrievanceForum</a>
            <div>
                <div class="spinner-grow text-secondary" style="position:relative;left:45px;top:7px;" id="ProfilePicSpinner"role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <img src="<%=userInfo['picture']%>" class="rounded-circle" style="opacity:0;width: 50px;border:2px solid black;transition: opacity 0.5s;" alt="Avatar" id="ProfilePic" onload="setTimeout(()=>{document.getElementById('ProfilePicSpinner').style.visibility='hidden';document.getElementById('ProfilePic').style.opacity='1';}, 10);"/>
            </div>
        </div>
    </nav><br>

    <label class="form-label">Create New Post</label><br>
    <div class="card">
        <div class="card-body">
            <a href="create" class="btn btn-lg btn-primary w-100"><i class="fa-solid fa-pencil"></i> Create Post</a>
        </div>
    </div><br>
    <label class="form-label">Your Draft Posts</label>
    <div class="card">
        <div class="card-body">
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Title</th>
                    <th scope="col">Description</th>
                    <th scope="col">Tools</th>
                  </tr>
                </thead>
                <tbody>
                    <% let i =0;drafts.forEach(function(draft) { i+=1;%>
                        <tr>
                            <th scope="row"><%=i %></th>
                            <td><span style="display: block;width: 100px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"><%= draft.title %></span></td>
                            <td><span style="display: block;width: 100px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;"><%= draft.description %></span></td>
                            <td><a type="button" class="btn btn-outline-primary" href="edit/<%=draft.id%>">Edit</a> <button type="button" class="btn btn-outline-danger">Delete</button></td>
                        </tr>
                    <% }); %>

                    <% if(i == 0){%>
                        <tr class="text-muted">
                            <th scope="row"><i class="fa-solid fa-xmark"></i></th>
                            <td>No</td>
                            <td>Draft</td>
                            <td>Found</td>
                        </tr>
                    <%}%>
                </tbody>
              </table>
        </div>
    </div>

    <div class="footer" style="position: fixed;left: 1%;bottom: 1%;width: 98%;background-color: white;text-align: center;">
        <div class="btn-group w-100" role="group" aria-label="Basic outlined example">
            <a href="dashboard" type="button" class="btn btn-outline-primary"> <i class="fa-solid fa-house"></i><br>Home</a>
            <button type="button" class="btn btn-primary"><i class="fa-solid fa-plus"></i><br>Create</button>
            <button type="button" class="btn btn-outline-primary"> <i class="fa-solid fa-bell"></i><br>Notification</button>
            <button type="button" class="btn btn-outline-primary"> <i class="fa-solid fa-user"></i><br>Profile</button>
        </div>
    </div>
</div>
</body>
</html>